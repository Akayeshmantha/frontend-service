<div class="row">
	<div class="col-12">
		<h3 i18n>Dashboard</h3>
		<div class="space-before">
			<span i18n>Welcome to the</span> <img class="img-sm" src="assets/nimble_logo.png"/> <span i18n>platform,</span> {{fullName}}!
		</div>
	</div>
</div>

<div class="row space-before">
	<div class="col-12">
		<h4 class="space-after" i18n>Sales</h4>
		<div *ngIf="seller_history.length > 0">
			<table class="table table-striped table-bordered">
				<tr><th>Process</th><th i18n>Date</th><th i18n>Product</th><th i18n>Buyer</th><th i18n>Note</th><th i18n>Status</th><th i18n>Response</th><th i18n>Options</th></tr>
				<tr *ngFor="let processMetadata of seller_history">

					<td>{{processMetadata.processType}}</td>
					<td>{{processMetadata.start_time }}</td>
					<td>{{processMetadata.product_name}}</td>
					<td>{{processMetadata.buyerName }}</td>
					<td>{{processMetadata.note}}</td>
					<td>{{processMetadata.status}}</td>
					<td>{{processMetadata.response}}</td>

					<!-- order options -->
					<td *ngIf="processMetadata.processType == 'Order' && processMetadata.status == 'Started'">
						<button class="btn btn-block btn-success" (click)="respondToOrder(processMetadata.process_id, processMetadata.content, true)" i18n>Approve</button>
						<button class="btn btn-block btn-danger" (click)="respondToOrder(processMetadata.process_id, processMetadata.content, false)" i18n>Decline</button>
					</td>

					<!-- negotiation options -->
					<td *ngIf="processMetadata.processType == 'Negotiation' && processMetadata.orderResponse==''">
						<button class="btn btn-block btn-success" (click)="respondToRFQ(processMetadata.process_id,'approved',processMetadata.order.message)" i18n>Approve</button>
						<button class="btn btn-block btn-danger" (click)="respondToRFQ(processMetadata.process_id,'declined','')" i18n>Decline</button>
					</td>
				</tr>
			</table>
		</div>
		<div *ngIf="seller_history.length == 0">
			<span i18n>No data</span>
		</div>
	</div>
</div>

<div class="row space-before">
	<div class="col-12">
		<h4 class="space-after" i18n>Purchases</h4>
		<div *ngIf="buyer_history.length > 0">
			<table class="table table-striped table-bordered">
				<tr><th>Process</th><th i18n>Date</th><th i18n>Product</th><th i18n>Seller</th><th i18n>Note</th><th i18n>Status</th><th i18n>Response</th><th i18n>Options</th></tr>
				<tr *ngFor="let processMetadata of buyer_history">
					<td>{{processMetadata.processType}}</td>
					<td>{{processMetadata.start_time }}</td>
					<td>{{processMetadata.product_name}}</td>
					<td>{{processMetadata.sellerName }}</td>
					<td>{{processMetadata.note}}</td>
					<td>{{processMetadata.status}}</td>
					<td>{{processMetadata.response}}</td>

					<!-- details column -->
					<!--<td>-->
						<!--<button class="btn btn-block btn-info" (click)="navigateToBPDetails()" i18n>Details</button>-->
					<!--</td>-->

					<!-- order options -->
					<td>-</td>

					<!-- negotation options -->
					<td *ngIf="processMetadata.processType == 'Negotiation' && processMetadata.orderResponse==''">
						<button class="btn btn-block btn-danger" (click)="cancelOrder(processMetadata.process_id)" i18n>Cancel</button>
					</td>
					<td *ngIf="processMetadata.processType == 'Negotiation' && processMetadata.orderResponse!=''">
						<button *ngIf="processMetadata.orderResponse.response=='approved'" class="btn btn-block btn-info" (click)="placeOrder(processMetadata)" i18n>Order</button>
						<button *ngIf="processMetadata.orderResponse.response=='declined'" class="btn btn-block btn-info" (click)="negotiate(processMetadata.order)" i18n>Negotiate</button>
						<button class="btn btn-block btn-danger" (click)="removeOrder(processMetadata.process_id)" i18n>Remove from history</button>
					</td>
				</tr>
			</table>
		</div>
		<div *ngIf="buyer_history.length == 0">
			<span i18n>No data</span>
		</div>
	</div>
</div>