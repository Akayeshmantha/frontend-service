<div [hidden]="!callback">
    <div *ngFor="let result of response">
        <h3 class="space-after">
            <b>{{ result[product_name] }}</b><br/>
            <i>{{ result[product_vendor_name] }}</i>
        </h3>
        <div class="row">
            <div class="col-9">
                <div *ngFor="let detail of details">
                    <div class="input-group form-group">
                        <label class="input-group-addon">{{ detail.key }}</label>
                        <input type="text" class="form-control" disabled [value]="detail.value">
                    </div>
                </div>
                <div *ngFor="let config of configs">
                    <div class="input-group form-group">
                        <label class="input-group-addon">{{ config.key }}</label>
                        <div class="form-control">
							<span *ngFor="let value of config.value">
								<span *ngIf="checkConfig(value.fileName.split('_')[1],value.fileName.split('_')[0].charAt(0).toUpperCase()+value.fileName.split('_')[0].slice(1))">
									<button class="btn btn-block btn-secondary active" style="margin-bottom:0.2rem;"
                                            (click)="setImage(value.fileName.split('_')[1],value.fileName.split('_')[0].charAt(0).toUpperCase()+value.fileName.split('_')[0].slice(1))">
										<img class="btn-img" src="data:{{value.mimeCode}};base64,{{value.value}}"
                                             onerror="this.src='assets/empty_img.png';"> <span>{{ value.fileName.split("_")[0].charAt(0).toUpperCase() + value.fileName.split("_")[0].slice(1) }}</span>
									</button>
								</span>
								<span *ngIf="!checkConfig(value.fileName.split('_')[1],value.fileName.split('_')[0].charAt(0).toUpperCase()+value.fileName.split('_')[0].slice(1))">
									<button class="btn btn-block btn-secondary" style="margin-bottom:0.2rem;"
                                            (click)="setImage(value.fileName.split('_')[1],value.fileName.split('_')[0].charAt(0).toUpperCase()+value.fileName.split('_')[0].slice(1))">
										<img class="btn-img" src="data:{{value.mimeCode}};base64,{{value.value}}"
                                             onerror="this.src='assets/empty_img.png';"> <span>{{ value.fileName.split("_")[0].charAt(0).toUpperCase() + value.fileName.split("_")[0].slice(1) }}</span>
									</button>
								</span>
							</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-3 align-center">
                <div class="bordered">
                    <img *ngIf="catalogueLine && catalogueLine.goodsItem.item.productImage.length > 0"
                         src="data:{{catalogueLine.goodsItem.item.productImage[0].mimeCode}};base64,{{catalogueLine.goodsItem.item.productImage[0].value}}"
                         class="img-max"
                         onerror="this.src='assets/empty_img.png';"/>
                    <img *ngIf="!catalogueLine || catalogueLine.goodsItem.item.productImage.length == 0"
                         src="assets/empty_img.png"
                         class="img-max"/>
                </div>
                <a *ngIf="response && catalogueLine"
                   href="#bpPanel"
                   class="btn btn-info col mt-3"
                   (click)="showBPOptions = !showBPOptions"
                   i18n
                >Show available business options</a>
            </div>
        </div>
        <!--<form (ngSubmit)="onSubmit()" class="space-before" #orderForm="ngForm" novalidate>
            <div class="input-group form-group">
                <label for="amount" class="input-group-addon" i18n>Amount</label>
                <input type="text" class="form-control" id="amount" required [(ngModel)]="order.orderLine[0].lineItem.quantity.value" name="amount"
                       #amount="ngModel" pattern="\d*">
            </div>
            <button type="submit" class="btn btn-success" [disabled]="!orderForm.form.valid" i18n>Order</button>
        </form>-->
        <div *ngIf="showBPOptions" id="bpPanel" class="mt-5">
            <h4 class="btn btn-warning col mb-3">The business processes that you can initiate for this item with the seller</h4>
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a href id="ordertab"
                       [ngClass]="{'nav-link': true, active: selectedOption == 'order'}"
                       (click)="selectedOption = 'order'; $event.preventDefault();"
                       i18n
                    >Order</a>
                </li>

                <li class="nav-item">
                    <a href id="negotiationtab"
                       [ngClass]="{'nav-link': true, active: selectedOption == 'negotiation'}"
                       (click)="selectedOption = 'negotiation'; $event.preventDefault();"
                       i18n
                    >Negotiate</a>
                </li>
            </ul>

            <div *ngIf="showBPOptions">
                <order-parameters
                        *ngIf="selectedOption == 'order'"
                        id="orderParams"
                        [catalogueLine]="catalogueLine"
                        [productResponse]="response[0]">
                </order-parameters>
                <negotiation-params
                        *ngIf="selectedOption == 'negotiation'"
                        id="negotiationParams"
                        [catalogueLine]="catalogueLine"
                        [productResponse]="response[0]">
                </negotiation-params>
            </div>
        </div>
    </div>
</div>

<div [hidden]="error_detc || callback">
    <img class="space-before" src="assets/form_loader.gif"/>
</div>
<div [hidden]="!error_detc">
    <div class="alert alert-danger space-before" role="alert" i18n>An error occured - please try again later</div>
</div>

<div [hidden]="error_detc2 || callback2 || !submitted2">
    <img class="space-before" src="assets/form_loader.gif"/>
</div>
<div [hidden]="!callback2">
    <div class="alert alert-success space-before" role="alert" i18n>Order placed - track the progress on your <a
            routerLink="/dashboard">dashboard</a></div>
</div>
<div [hidden]="!error_detc2">
    <div class="alert alert-danger space-before" role="alert" i18n>An error occured - please try again later</div>
</div>