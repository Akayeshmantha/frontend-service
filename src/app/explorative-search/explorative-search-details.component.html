<!-- Explorative Search Details HTML -->
<ngb-alert type="info" *ngIf="!introAlert" (close)="introAlert = true">
    <div class="row">
    <div class="col-md-2"><i class="fa fa-6x fa-info-circle"></i></div>
    <div class="col-md-10">
        <p>
            <strong>Let Us Help You</strong>
        </p>
            <ul>
                <li>Double Click on a Node to <strong>select</strong> that property.</li>
                <li>Single Click on a Node to <strong>deselect</strong> that property.</li>
                <li>Certain Properties may not have filters to display, nevertheless if selected they will be shown
                    in your final selections.
                </li>
            </ul>
    </div>
    </div>
</ngb-alert>
<ngb-alert type="info" *ngIf="rerenderAlert" (close)="rerenderAlert = false">
    <p>
        <strong>The Graph has been updated! Your previous selections, if any are still selected.</strong>
    </p>
</ngb-alert>
<div [hidden]="!hiddenElement">
    <div class="row">
        <!--<pre>-->
            <!--<code>-->
                <!--{{sparqlSelectedOption | json}}-->
            <!--</code>-->
        <!--</pre>-->
        <div class="table-responsive">
            <table class="table table-hover table-bordered">
                <caption>Product Overview</caption>
                <thead>
                    <tr>
                        <th>
                            Properties
                        </th>
                        <th>
                            Specifications
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let column of sparqlSelectedOption?.columns; let i=index">
                        <th scope="row">
                            {{column}}
                        </th>
                        <td>
                            {{sparqlSelectedOption.rows[0][i]}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row" style="margin-top: 15px">
        <div class="col-md-6">
            <button class="btn btn-outline-primary" (click)="hiddenElement=!hiddenElement">Back to Graph</button>
        </div>
        <div class="col-md-6">
            <button class="btn btn-outline-warning" [disabled]="!negotiationEnable" (click)="negotiation()">
                Negotiate</button>
        </div>
    </div>
</div>
<div class="cont-max" [hidden]="hiddenElement">
    <div class="row">
        <div class="col-md-10 align-center">
            <svg width="1200" height="1200"></svg>
        </div>
        <div class="col-md-2">
            <search-filter *ngFor="let eachFilter of arrayPassedToChild" [filterProperties]="eachFilter"
                           (filterSelectionUpdated)="handleFilterSelectionUpdated($event)">
            </search-filter>
        </div>
    </div>
</div>
<br>
<br>
<div *ngIf="tableJSON.parameters.length">
    <div class="row" [hidden]="hiddenElement">
        <button class="btn btn-lg btn-primary" (click)="genTable()">Obtain Results</button>
    </div>
    <br>
    <br>
    <div class="row" *ngIf="tableResult?.columns !== undefined">
        <ngb-alert type="warning" *ngIf="emptySPARQLTable" (close)="emptySPARQLTable=false">
            <p>We couldn't find any match for your selections. Maybe try with less or different selection.</p>
        </ngb-alert>
        <div class="table-responsive">
            <table class="table table-sm table-bordered">
                <caption>Available Results from NIMBLE</caption>
              <thead>
                <tr>
                    <th>
                        Properties
                    </th>
                    <th *ngFor="let row of tableResult?.rows; let i=index" scope="col">
                        Result #{{i+1}}
                    </th>
                </tr>
              </thead>
                <tbody>
                    <tr *ngFor="let column of tableResult?.columns; let cind=index">
                        <th scope="row">{{column}}</th>
                        <td *ngFor="let row of tableResult?.rows">{{row[cind]}}</td>
                    </tr>
                    <tr>
                        <th>More Info.</th>
                        <td scope="row" *ngFor="let uuid of tableResult?.uuids; let uuidIndex=index">
                            <button class="btn btn-xs btn-outline-success"
                                    (click)="getSparqlOptionalSelect(uuidIndex)">
                                More
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <!--<pre>-->
        <!--<code>{{tableJSON | json}}</code>-->
    <!--</pre>-->
</div>
