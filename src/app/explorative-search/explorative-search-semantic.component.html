<div class="container displayArea">
    <br>
    <div class="row">
        <div class="col-12">
            <div [hidden]="hiddenElement">
                <h5>Your Semantic Query</h5>
                <code (click)="editSemanticQuery()">
                    {{sentence | json}}
                </code>
                <span><button (click)="genTable()">Search Query</button></span>
                <br>
                <br>
                <!--<div class="form-group" *ngIf=" results.length > 1 && !selectedConcept">-->
                    <ngb-accordion #acc="ngbAccordion">

                        <!-- Property panel -->
                        <ngb-panel title="Property Panel" id="toggle-property" [disabled]="!configSPQ">
                            <ng-template ngbPanelContent>
                                    <div class="input-group">
                                    <label class="input-group-addon">Search Property</label>
                                    <input type="search" class="form-control" style="width: 500px;"
                                        [(ngModel)]="model"
                                        [ngbTypeahead]="search"
                                        [resultTemplate]="rt"
                                        [inputFormatter]="formatter"
                                        (keyup.enter)="applyProperty();acc.toggle('toggle-property'); model='';"/>
                                    </div>
                                <ng-template #rt let-r="result" let-t="term">
                                    <div>
                                        {{r.translatedProperty}}
                                    </div>
                                </ng-template>
                            </ng-template>
                        </ngb-panel>

                        <!--Value Panel-->
                        <ngb-panel title="Values Panel" id="toggle-value" [disabled]="!configSPQ">
                            <ng-template ngbPanelContent>
                            <ul class="list-group">
                                <li class="list-group-item"
                                    *ngFor="let eachval of searchvalue"
                                    (click)="sentence=sentence+eachval; acc.toggle('toggle-value'); applyFilter(eachval, selectedPropertyURL);">
                                    {{eachval}}
                                </li>
                            </ul>
                            </ng-template>
                        </ngb-panel>

                        <!--- Reference Panel -->
                        <ngb-panel title="Reference Panel" id="toggle-reference" [disabled]="!configSPQ">
                            <ng-template ngbPanelContent>
                            <div class="row">
                                <div class="col-6">
                                    <div class="form-group">
                                        <label for="exampleFormControlSelect2"><b>Product References</b></label>
                                        <select multiple class="form-control" id="exampleFormControlSelect2">
                                            <option *ngFor="let eachRef of referenceResults['allAvailableReferences']; let i=index;" (click)="showRefResults(i);">
                                                {{eachRef.translatedProperty}}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-6" *ngIf="refResultsRange.length > 0">
                                    <label for="exampleFormControlSelect2"><b>Selected Reference</b></label>
                                    <ul class="list-group">
                                        <li class="list-group-item" *ngFor="let eachRefResult of refResultsRange" (click)="referenceSelection(eachRefResult); acc.toggle('toggle-reference')">
                                            {{eachRefResult.translation}}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            </ng-template>
                        </ngb-panel>


                    </ngb-accordion>
            </div>

            <div [hidden]="!hiddenElement" style="height: 500px; overflow: auto;">
                <table >

                    <tr>
                        <th style="width:50%">Property</th>
                        <td style="width:50%;font-weight: bold">Value
                            <wbr/>
                        </td>
                    </tr>
                    <tr *ngFor="let column of sparqlSelectedOption?.columns; let i=index">

                        <th style="width:50%">{{column}}</th>
                        <td style="width:50%">{{sparqlSelectedOption?.rows[0][i]}}
                            <wbr/>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="row">
                <div class="col-8">
                    <button [hidden]="!hiddenElement" class="btn btn-lg btn-warning" (click)="hiddenElement=!hiddenElement;">
                        Back
                    </button>
                </div>
                <div class="col-4 pull-right">
                    <button class="btn btn-lg btn-primary" (click)="negotiation()"
                            [disabled]="!negotiationEnable"
                            [hidden]="!hiddenElement">
                        Negotiation</button>
                </div>
            </div>
        </div>
    </div>
    <br>
    <hr>
    <div class="row" [hidden]="hiddenElement">
        <div class="col-8">

            <div class="btn-group">

                <button class="btn btn-outline-primary btn-lg"
                        [disabled]="!configSPQ"
                        placement="bottom"
                        ngbTooltip="Search for Product/Reference Property"
                        (click)="hasPropertyRelation('hasProperty'); acc.toggle('toggle-property');"> hasProperty </button>


                <button class="btn btn-outline-primary btn-lg"
                        [disabled]="!results.length"
                        placement="bottom"
                        ngbTooltip="Search for Property Specific Values"
                        (click)="hasValueRelation('hasValue'); acc.toggle('toggle-value');"> hasValue </button>


                <button class="btn btn-outline-primary btn-lg" #refBtn
                        [disabled]="!configSPQ"
                        placement="bottom"
                        ngbTooltip="Search for Product References"
                        (click)="hasReferenceRelation('hasReference');acc.toggle('toggle-reference')"> hasReference </button>

                <button class="btn btn-outline-warning btn-lg" #objBtn (click)="objectPropRelation(eachButton)"
                        *ngFor="let eachButton of objectRelationsButton['listOfSQP']">
                {{eachButton}}
                </button>
            </div>
        </div>
    </div>
    <br>
        <div *ngIf="tableResult" style="overflow: auto; height: 100px;">
            <table>
                <tr>
                    <th *ngFor="let column of tableResult?.columns">{{column}}</th>
                </tr>
                <tr *ngFor="let row of tableResult?.rows; let i=index;">
                    <td *ngFor="let field of row"> {{field}}</td>
                    <td *ngIf="tableResult?.uuids">
                        <button class="btn btn-sm btn-success" (click)="getSparqlOptionalSelect(i)">
                            More</button></td>
                </tr>
            </table>
        </div>
     <!--<ng-template (removedKeys)="processModalInteraction($event)"></ng-template>-->

    <div class="row">
        <pre>
            {{semQJSon | json}}
        </pre>

    </div>
</div>
