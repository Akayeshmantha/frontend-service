<!-- Titles -->
<div class="row title-row">
    <div class="col-2"></div>
    <div class="col-5">
        <h4>Manufacturer's Terms</h4>
    </div>
    <div class="col-5">
        <h4>Counter Offer</h4>
    </div>
</div>

<!-- Delivery Period -->
<div class="row content-row bg-light">
    <div class="col-2">
        <strong>Delivery Period:</strong>
    </div>
    <div class="col-5">
        {{ line.goodsItem.deliveryTerms.estimatedDeliveryPeriod.durationMeasure.value }} 
        {{ line.goodsItem.deliveryTerms.estimatedDeliveryPeriod.durationMeasure.unitCode }}
    </div>
    <div class="col-5">
        <negotiation-request-input label="Request Delivery Period" [(cbModel)]="rfq.negotiationOptions.deliveryPeriod" [disabled]="isLoading() || isReadOnly()"
            id="deliveryCb" [quantity]="rfqLine.lineItem.delivery[0].requestedDeliveryPeriod.durationMeasure" quantityType="time_quantity">
        </negotiation-request-input>
    </div>
</div>

<!-- Waranty -->
<div class="row content-row">
    <div class="col-2">
        <strong>Warranty:</strong>
    </div>
    <div class="col-5">
        {{ getManufacturerWarranty() }}
    </div>
    <div class="col-5">
        <negotiation-request-input label="Request Waranty" [(cbModel)]="rfq.negotiationOptions.waranty" [disabled]="isLoading() || isReadOnly()"
            id="warantyCb" [quantity]="rfqLine.lineItem.warrantyValidityPeriod.durationMeasure" quantityType="time_quantity">
        </negotiation-request-input>
    </div>
</div>

<!-- Incoterms -->
<div class="row content-row bg-light">
    <div class="col-2">
        <strong>Request Incoterms:</strong>
    </div>
    <div class="col-5">
        {{ line.goodsItem.deliveryTerms.incoterms }}
    </div>
    <div class="col-5">
        <negotiation-request-input label="Incoterms" [(cbModel)]="rfq.negotiationOptions.incoterms" [disabled]="isLoading() || isReadOnly()"
            id="incotermsCb" [options]="INCOTERMS" [(selected)]="rfqLine.lineItem.deliveryTerms.incoterms">
        </negotiation-request-input>
    </div>
</div>

<!-- Quantity -->
<div class="row content-row">
    <div class="col-2">
        <strong>Quantity:</strong>
    </div>
    <div class="col-5">
        <input type="number" [(ngModel)]="requestedQuantity" class="form-control form-control-sm" [disabled]="isLoading() || isReadOnly()" />
        <div class="input-spacer"></div>
        <input type="range" [(ngModel)]="requestedQuantity" class="form-control-range" 
            [max]="getMaximumQuantity()" [step]="getPriceSteps()" [disabled]="isLoading() || isReadOnly()"/>
    </div>
    <div class="col-5">
        <negotiation-request-input label="Request Payment Terms" [(cbModel)]="rfq.negotiationOptions.paymentTerms" 
            id="paymentTermsCb" [options]="PAYMENT_TERMS" [(selected)]="rfq.paymentTerms" [disabled]="isLoading() || isReadOnly()">
        </negotiation-request-input>
        <div class="input-spacer"></div>
        <negotiation-request-input label="Request Payment Means" [(cbModel)]="rfq.negotiationOptions.paymentMeans" 
            id="paymentMeansCb" [options]="PAYMENT_MEANS" [(selected)]="rfq.paymentMeans" [disabled]="isLoading() || isReadOnly()">
        </negotiation-request-input>
    </div>
</div>

<!-- Price -->
<div class="row content-row bg-light">
    <div class="col-2">
        <strong>Price:</strong>
    </div>
    <div class="col-5">
        {{ line.requiredItemLocationQuantity.price.priceAmount.value }} {{ line.requiredItemLocationQuantity.price.priceAmount.currencyID }} 
        for {{ line.requiredItemLocationQuantity.price.baseQuantity.value }} {{ line.requiredItemLocationQuantity.price.baseQuantity.unitCode }}
    </div>
    <div class="col-5">
        <negotiation-request-input label="Request Price" [(cbModel)]="negotiatePrice" id="priceCb" [disabled]="isLoading() || isReadOnly()"
            [(amount)]="negotiatedPrice" [amountUnit]="this.line.requiredItemLocationQuantity.price.priceAmount.currencyID">
        </negotiation-request-input>
    </div>
</div>

<!-- Delivery -->
<div class="row">
    <div class="col-12">
        <h4>Delivery Address</h4>
        <negotiation-address [address]="bpDataService.requestForQuotation.delivery.deliveryAddress" [disabled]="isLoading() || isReadOnly()">
        </negotiation-address>
    </div>
</div>

<!-- Actions -->
<div *ngIf="!isWaitingForReply()" class="row actions-row">
    <div class="col-4 call-status-col"><call-status [callStatus]="sendRequestCallStatus"></call-status></div>
    <div class="col-3 price-col">Total Price: {{ totalPrice }} {{ rfqLine.lineItem.price.priceAmount.currencyID }}</div>
    <div class="col-2">
        <button class="btn btn-secondary action" [disabled]="isLoading()"(click)="onBack()">Back</button>
    </div>
    <div class="col-3">
        <button class="btn btn-primary action" [disabled]="isLoading()" (click)="onSendRequest()">
            {{ rfq.negotiationOptions.isNegotiatingAnyTerm() ? "Send Request" : "Continue With Manufacturer's Terms" }}
        </button>
    </div>
</div>

<div *ngIf="isWaitingForReply()" class="row actions-row">
    <div class="col-7"></div>
    <div class="col-3 price-col">Requested Price: {{ totalPrice }} {{ rfqLine.lineItem.price.priceAmount.currencyID }}</div>
    <div class="col-2">
        <button class="btn btn-secondary action" [disabled]="isLoading()"(click)="onBack()">Back</button>
    </div>
</div>