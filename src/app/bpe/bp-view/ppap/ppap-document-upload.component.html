
<div class="row space-before">
    <div class="col-12">
        <div *ngIf="documents.length == 0">
            <h3>No File Requested</h3>
        </div>
        <div *ngIf="documents.length > 0">
            <table class="table table-striped table-bordered">
                <tr><th>Document</th><th i18n>Upload</th><th *ngIf="binaryObjects.length != 0">Files</th></tr>
                <tr *ngFor="let document of documents" >
                    <td *ngIf="!isSent(document)">{{document}}</td>
                    <td *ngIf="isSent(document)" style="background-color: green;">{{document}}</td>
                    <td><div (click)="file.click()"
                             class="col-4"
                             style="display: inline-block;">
                        <input #file type="file" (change)="fileChange($event,document)" multiple accept="file/*"
                               style="display: none">
                        <i class="fa fa-plus-circle pointer"></i>
                        <span i18n>Add file</span>
                    </div></td>
                    <div *ngFor="let object of binaryObjects">
                        <div *ngFor="let doc of object.documents">
                            <td *ngIf="document == object.documentName" style="border: none">{{doc.fileName}}
                                <button  style="align: right" class="btn btn-xs btn-danger" (click)="remove(document,doc)"
                                >&times;
                                </button>
                            </td>
                        </div>
                    </div>
                </tr>
            </table>
        </div>
    </div>
</div>

<hr>
<!-- Request Note -->
<div class="row form-group space-after">
    <div class="col-2">
        <label for="noteTextarea"><strong>Note:</strong></label>
    </div>
    <div class="col-10">
        <textarea id="noteTextarea" class="form-control" rows="3" [(ngModel)]="ppap.note" [disabled]="isLoading() || isRequestSent()"></textarea>
    </div>
</div>

<!-- Response Note -->
<div class="row form-group space-after">
    <div class="col-2">
        <label for="noteTextarea"><strong>Note:</strong></label>
    </div>
    <div class="col-10">
        <textarea id="noteTextarea" class="form-control" rows="3" [(ngModel)]="ppap.note" [disabled]="isLoading() || isRequestSent()"></textarea>
    </div>
</div>

<value-view class="row"
            [presentationMode]="'view'"
            [propName]="'Note From Buyer'"
            [(value)]="note"
            >
</value-view>
<hr>
<value-view class="row"
            [presentationMode]="'edit'"
            [propName]="'Note'"
            [(value)]="noteToSend">
</value-view>

<!-- Action buttons -->
<div *ngIf="!isSent()" class="row actions-row">
    <div class="col-4"></div>
    <div class="col-4 call-status-col"><call-status [callStatus]="callStatus"></call-status></div>
    <div class="col-2">
        <button class="btn btn-secondary action" [disabled]="isLoading()" (click)="onBack()">Back</button>
    </div>
    <div class="col-2">
        <button class="btn btn-primary action" [disabled]="isLoading()" (click)="responseToPpapRequest(true)">
            Send Request
        </button>
    </div>
</div>

<div *ngIf="isSent()" class="row actions-row">
    <div class="col-8"></div>
    <div class="col-2">
        <button class="btn btn-secondary action" (click)="onBack()">Back</button>
    </div>
    <div class="col-2">
        <button class="btn btn-primary action" disabled>
            Request Sent
        </button>
    </div>
</div>
